<main class="container pt-2 pb-5">
  <div class="row">
    {{!-- 主卡片 --}}
    <section class="col-md-9 mb-5 p-3">
      <div class="row panel mx-1">
        <div class="panel-heading col-md-12">
          <div class="mt-3">訂購紀錄</div>
        </div>
        <table class="table table-sm mt-4 mb-0 mx-4">
          <thead>
            <tr>
              <th scope="col" class="accordion-thead">訂單序號</th>
              <th scope="col" class="accordion-thead">成立日期</th>
              <th scope="col" class="accordion-thead">總金額</th>
            </tr>
          </thead>
        </table>
        {{#if orders}}
          <div id="accordion" class="mb-4">
            {{#each orders}}
              <div class="card mx-4 mt-2">
                <div class="card-header order-card" class="btn btn-link btn-block" data-toggle="collapse"
                  data-target="#collapseOne_{{this.id}}">
                  <table>
                    <tbody>
                      <tr>
                        <td class="accordion-thead">{{this.sn}}</td>
                        <td class="accordion-thead">{{this.createdTime}}</td>
                        <td class="accordion-thead">NTD {{this.amountFormat}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="collapseOne_{{this.id}}" class="collapse" aria-labelledby="headingOne"
                  data-parent="#accordion">
                  <div class="card-body">
                    <table class="order-info">
                      <tbody>
                        <tr>
                          <td class="accordion-title">收件人</td>
                          <td class="accordion-data">{{this.receiver}}</td>
                        </tr>
                        <tr>
                          <td class="accordion-title">聯絡電話</td>
                          <td class="accordion-data">{{this.phone}}</td>
                        </tr>
                        <tr>
                          <td class="accordion-title">收件地址</td>
                          <td class="accordion-data">{{this.address}}</td>
                        </tr>
                        <tr>
                          <td class="accordion-title">付款方式</td>
                          <td class="accordion-data">{{this.payMethod}}</td>
                        </tr>
                        <tr>
                          <td class="accordion-title">付款狀態</td>
                          <td class="accordion-data">
                            {{#if this.payStatus}}
                              <span class="text-success font-weight-bold">已付款</span>
                            {{else}}
                              <span class="mr-3 text-danger font-weight-bold">未付款</span>
                              <a href="/orders/{{this.id}}/payment" class="btn cart-btn">立即付款</a>
                            {{/if}}
                          </td>
                        </tr>
                        <tr>
                          <td class="accordion-title">出貨狀態</td>
                          <td class="accordion-data">
                            {{#if this.shipStatus}}
                              已出貨
                            {{else}}
                              未出貨
                            {{/if}}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <hr>
                    <table class="order-info">
                      <tbody>
                        {{#each this.products}}
                          <tr>
                            <td class="accordion-title"></td>
                            <td class="accordion-data">
                              <div class="row col-12 mb-2">
                                <a href="/products/{{this.id}}" class="product-img">
                                  <img src="{{this.mainImg}}" class="rounded mx-auto d-block" alt="productImage"
                                    style="height:50px">
                                </a>
                                <div>
                                  <div class="ml-3">{{this.name}}</div>
                                  <div class="row ml-3">
                                    <div>NTD {{this.orderPrice}}</div>
                                    <div class="ml-3">x {{this.OrderItem.quantity}}</div>
                                  </div>
                                </div>
                              </div>
                            </td>
                          </tr>
                        {{/each}}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            {{/each}}
          </div>
        {{else}}
          <div class="col-12 my-3">
            <div class="text-center">
              <p class="mb-3">你還沒有訂購記錄喔!</p>
              <p>- Tip -</p>
              <p>完成結帳以增加訂購紀錄</p>
            </div>
          </div>
        {{/if}}
      </div>
      <br>
    </section>
    {{!-- 側邊欄 --}}
    <section class="col-md-3 mb-5 p-3">
      <div class="row panel mx-1 side-box-shadow">
        <div class="panel-body w-100 p-3">
          <div>
            <div class="side-heading col-md-12">
              <div><i class="fas fa-user mr-2"></i> 帳戶</div>
            </div>
          </div>
          <hr class="my-2">
          <div>
            <a href="/users/profile" class="font-weight-bold ml-2 text-decoration-none profile-href">我的帳戶</a>
            <ul class="side-item-list">
              <li>
                <a href="#" class="text-decoration-none profile-href side-list-text">設定檔</a>
              </li>
              <li>
                <a href="#" class="text-decoration-none profile-href side-list-text">密碼變更</a>
              </li>
              <li>
                <a href="/orders" class="text-decoration-none font-weight-bold text-pick side-list-text">訂購紀錄</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>